<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test</title>
    <script>
        "use strict";

        var form = $("#test-form"),
            langs = form.find("[name=lang]"),
            selectAll = form.find("label.selectAll :checkbox"),
            selectAllLabel = form.find("label.selectAll span.selectAll"),
            deselectAllLabel = form.find("label.selectAll span.deselectAll"),
            invertSelect = form.find("a.invertSelect");

        // 重置初始化状态:
        form.find("*").show().off();
        form.find(":checkbox").prop("checked", false).off();
        deselectAllLabel.hide();
        // 拦截form提交事件:
        form.off().submit(function (e) {
            e.preventDefault();
            alert(form.serialize());
        });
        selectAll.click(function () {
            langs.prop("checked", this.checked); //全选
            checkAll(); //检测是否全选
        });
        langs.click(function () {
            checkAll(); //检测是否全选
        });
        invertSelect.click(function () {
            langs.prop("checked", (x, y) => {
                return !y;
            }); //反选实现
            checkAll(); //检测是否全选
        });

        function checkAll() {
            if (langs.filter(":checked").length == 5) {
                //判断选择了多少个
                deselectAllLabel.show(); //显示全不选
                selectAllLabel.prev().prop("checked", true); //全选打钩
                selectAllLabel.hide(); //隐藏全选
            } else {
                deselectAllLabel.hide();
                selectAllLabel.prev().prop("checked", false);
                selectAllLabel.show();
            }
        }

        selectAll.click(function () {
            langs.prop("checked", this.checked); //全选
            checkAll(); //检测是否全选
        });
        langs.click(function () {
            checkAll(); //检测是否全选
        });
        invertSelect.click(function () {
            langs.prop("checked", (x, y) => {
                return !y;
            }); //反选实现
            checkAll(); //检测是否全选
        });

        function checkAll() {
            if (langs.filter(":checked").length == 5) {
                //判断选择了多少个
                deselectAllLabel.show(); //显示全不选
                selectAllLabel.prev().prop("checked", true); //全选打钩
                selectAllLabel.hide(); //隐藏全选
            } else {
                deselectAllLabel.hide();
                selectAllLabel.prev().prop("checked", false);
                selectAllLabel.show();
            }
        }

    </script>
</head>

<body>
    <form id="test-form" action="test">
        <legend>请选择想要学习的编程语言：</legend>
        <fieldset>
            <p><label class="selectAll"><input type="checkbox"> <span class="selectAll">全选</span><span
                        class="deselectAll">全不选</span></label> <a href="#0" class="invertSelect">反选</a></p>
            <p><label><input type="checkbox" name="lang" value="javascript"> JavaScript</label></p>
            <p><label><input type="checkbox" name="lang" value="python"> Python</label></p>
            <p><label><input type="checkbox" name="lang" value="ruby"> Ruby</label></p>
            <p><label><input type="checkbox" name="lang" value="haskell"> Haskell</label></p>
            <p><label><input type="checkbox" name="lang" value="scheme"> Scheme</label></p>
            <p><button type="submit">Submit</button></p>
        </fieldset>
    </form>
</body>

</html>